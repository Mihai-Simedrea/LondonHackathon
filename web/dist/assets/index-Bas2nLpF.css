:root{--bg: #0a0a0a;--text: #e0e0e0;--accent: #00f0ff}*{margin:0;padding:0;box-sizing:border-box}body{font-family:JetBrains Mono,monospace;background:var(--bg);color:var(--text);min-height:100vh;overflow:hidden}#bg-canvas{position:fixed;top:0;left:0;width:100%;height:100%;z-index:-1;transition:filter .8s ease}#bg-canvas.blurred{filter:blur(12px)}#app{position:relative;z-index:3;display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:100vh;padding:2rem;gap:2rem}.header{text-align:center;transition:opacity .6s ease}.header.fade-out{opacity:0;pointer-events:none}.header h1{font-size:2.4rem;font-weight:700;letter-spacing:.35em;color:var(--accent);margin-bottom:.4rem}.header p{font-size:.75rem;font-weight:300;letter-spacing:.15em;opacity:.5;text-transform:uppercase}.start-btn{position:relative;z-index:5;font-family:JetBrains Mono,monospace;padding:.65rem 2.8rem;font-size:.85rem;font-weight:600;letter-spacing:.25em;text-transform:uppercase;background:var(--bg);color:var(--accent);border:1px solid var(--accent);border-radius:30px;cursor:pointer;transition:all .3s ease}.start-btn:hover{background:var(--accent);color:var(--bg);box-shadow:0 0 20px #00f0ff4d}.game-container{position:fixed;top:50%;left:calc(50% - 70px);transform:translate(-50%,-50%);z-index:4;border-radius:8px;overflow:hidden;border:1px solid rgba(0,240,255,.15);opacity:0;transition:opacity .6s ease}.game-container.visible{opacity:1}.game-container canvas{display:block;max-width:84vw;max-height:90vh}.game-timer{position:absolute;top:12px;right:14px;font-family:JetBrains Mono,monospace;font-size:.7rem;color:#fff6;letter-spacing:.1em;pointer-events:none;z-index:5}.game-loading{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);font-family:JetBrains Mono,monospace;font-size:.8rem;color:#ffffff80;letter-spacing:.1em;pointer-events:none;z-index:5}#chain-canvas{position:fixed;top:0;right:0;width:140px;height:100vh;pointer-events:none;z-index:6}::-webkit-scrollbar{width:4px}::-webkit-scrollbar-track{background:transparent}::-webkit-scrollbar-thumb{background:#ffffff1a;border-radius:2px}@media(max-width:480px){.header h1{font-size:1.5rem;letter-spacing:.2em}#chain-canvas{width:120px}.game-container canvas{max-width:90vw}}body.fnirs-heatmap-page{background:radial-gradient(950px 560px at 55% 34%,#48566c42,#222b382e,#0c0f1600 68%),radial-gradient(1400px 760px at 62% 8%,#2a3443,#131925 42%,#090c13 72%,#06080e)}body.fnirs-heatmap-page #bg-canvas{display:none}body.fnirs-heatmap-page #app{max-width:none;width:100%;padding:0;gap:1rem;display:block;min-height:100vh}.fnirs-page{display:block;position:relative;min-height:100vh;width:100vw;overflow:hidden}.fnirs-header,.fnirs-status-row{display:none!important}.fnirs-header{display:flex;justify-content:space-between;gap:1rem;align-items:flex-start}.fnirs-title h1{font-size:1.2rem;letter-spacing:.18em;color:#8be8ff}.fnirs-title p{opacity:.7;font-size:.8rem;margin-top:.3rem;line-height:1.35}.fnirs-badge{align-self:center;background:#ff9a3d1a;color:#ffc086;border:1px solid rgba(255,154,61,.25);border-radius:999px;padding:.45rem .8rem;font-size:.72rem;line-height:1.2;max-width:380px}.fnirs-controls{display:flex;gap:.7rem;align-items:center;position:absolute;top:1.15rem;right:1.4rem;z-index:20}.fnirs-controls{background:transparent;border:none;box-shadow:none;padding:0}.fnirs-filebox{display:none!important}.fnirs-filebox{display:flex;gap:.5rem;align-items:center;min-width:0}.fnirs-filebox input[type=file]{color:#d8e0ff;width:100%;font-family:JetBrains Mono,monospace;font-size:.75rem}.fnirs-btn{border:1px solid rgba(255,255,255,.14);background:#ffffff0a;color:#eaf4ff;border-radius:12px;padding:.6rem .95rem;cursor:pointer;font-family:JetBrains Mono,monospace;font-size:.75rem;transition:all .15s ease}.fnirs-btn:hover:enabled{border-color:#8be8ff73;background:#8be8ff14}.fnirs-btn:disabled{opacity:.45;cursor:not-allowed}.fnirs-btn.live{border-color:#ff7c7c59}.fnirs-btn.live.connected{background:#ff64641f;border-color:#ff64648c;color:#ffd4d4}#fnirs-play,#fnirs-disconnect{display:none!important}.fnirs-conn-dot{width:10px;height:10px;border-radius:50%;background:#ffffff24;border:1px solid rgba(255,255,255,.16);box-shadow:0 0 #fff0;transition:all .2s ease}.fnirs-conn-dot.connected{background:#f7fbff;border-color:#fffc;box-shadow:0 0 10px #ffffff8c,0 0 22px #99d3ff59,0 0 38px #7fbfff38}.fnirs-status-row{display:grid;grid-template-columns:1fr;gap:.75rem;align-items:center}.fnirs-status-row{background:transparent;border:none;box-shadow:none;padding:0 .2rem}.fnirs-status{min-height:1.25rem;white-space:pre-wrap;font-size:.66rem;line-height:1.35;opacity:.62;letter-spacing:.05em;text-transform:uppercase}.fnirs-legend{display:none;align-items:center;gap:.4rem;font-size:.7rem;opacity:.75}.fnirs-legend-gradient{width:120px;height:9px;border-radius:999px;background:linear-gradient(90deg,#2e6dff,#dbeafe,#ff695d);border:1px solid rgba(255,255,255,.12)}.fnirs-layout{display:block;width:100%}.fnirs-scene-card{position:relative;min-height:100vh;padding:0;background:transparent;border:none;box-shadow:none;width:100%}.fnirs-scene{width:100%;height:100%;min-height:100vh;border-radius:0;overflow:hidden;border:none;background:transparent;box-shadow:none;display:block}.fnirs-ruler-shell{position:absolute;top:.7rem;left:4.2rem;right:9.5rem;z-index:4;pointer-events:none}.fnirs-ruler-track{--show-offset-px: 117px;--tick-px-per-sec: 18px;--ruler-sharp-cutoff: calc(var(--tick-px-per-sec) * 3.05);--ruler-gauss-cutoff: calc(var(--tick-px-per-sec) * 14);--ruler-gauss-core: calc(var(--tick-px-per-sec) * 1.55);position:relative;height:28px;border-radius:0;border:none;background:transparent;overflow:hidden;box-shadow:none}.fnirs-ruler-track:after{content:none}.fnirs-ruler-ticks,.fnirs-ruler-ticks-blur{position:absolute;top:0;right:0;bottom:0;left:0;background:repeating-linear-gradient(90deg,transparent 0,transparent calc(var(--tick-px-per-sec) - 1px),rgba(210,232,255,.1) calc(var(--tick-px-per-sec) - 1px),rgba(210,232,255,.1) var(--tick-px-per-sec));opacity:.22;-webkit-mask-image:linear-gradient(90deg,transparent 0,transparent calc(50% - var(--ruler-sharp-cutoff)),rgba(255,255,255,.92) calc(50% - var(--ruler-sharp-cutoff)),rgba(255,255,255,.92) calc(50% + var(--ruler-sharp-cutoff)),transparent calc(50% + var(--ruler-sharp-cutoff)),transparent 100%),linear-gradient(180deg,transparent 0%,rgba(255,255,255,.18) 32%,rgba(255,255,255,.82) 58%,rgba(255,255,255,.22) 100%);mask-image:linear-gradient(90deg,transparent 0,transparent calc(50% - var(--ruler-sharp-cutoff)),rgba(255,255,255,.92) calc(50% - var(--ruler-sharp-cutoff)),rgba(255,255,255,.92) calc(50% + var(--ruler-sharp-cutoff)),transparent calc(50% + var(--ruler-sharp-cutoff)),transparent 100%),linear-gradient(180deg,transparent 0%,rgba(255,255,255,.18) 32%,rgba(255,255,255,.82) 58%,rgba(255,255,255,.22) 100%)}.fnirs-ruler-ticks.moving,.fnirs-ruler-ticks-blur.moving{animation:fnirs-ruler-scroll 1s linear infinite}.fnirs-ruler-ticks-blur{opacity:.14;filter:blur(1.2px);background:repeating-linear-gradient(90deg,transparent 0,transparent calc(var(--tick-px-per-sec) - 1px),rgba(230,242,255,.25) calc(var(--tick-px-per-sec) - 1px),rgba(230,242,255,.25) var(--tick-px-per-sec));-webkit-mask-image:linear-gradient(90deg,transparent 0,transparent calc(50% - var(--ruler-gauss-cutoff)),rgba(255,255,255,.02) calc(50% - calc(var(--ruler-gauss-cutoff) * .82)),rgba(255,255,255,.05) calc(50% - calc(var(--ruler-gauss-cutoff) * .62)),rgba(255,255,255,.1) calc(50% - calc(var(--ruler-gauss-cutoff) * .42)),rgba(255,255,255,.18) calc(50% - calc(var(--ruler-gauss-cutoff) * .24)),rgba(255,255,255,.28) calc(50% - calc(var(--ruler-gauss-core))),transparent calc(50% - var(--ruler-sharp-cutoff)),transparent calc(50% + var(--ruler-sharp-cutoff)),rgba(255,255,255,.28) calc(50% + calc(var(--ruler-gauss-core))),rgba(255,255,255,.18) calc(50% + calc(var(--ruler-gauss-cutoff) * .24)),rgba(255,255,255,.1) calc(50% + calc(var(--ruler-gauss-cutoff) * .42)),rgba(255,255,255,.05) calc(50% + calc(var(--ruler-gauss-cutoff) * .62)),rgba(255,255,255,.02) calc(50% + calc(var(--ruler-gauss-cutoff) * .82)),transparent calc(50% + var(--ruler-gauss-cutoff)),transparent 100%),linear-gradient(180deg,transparent 0%,rgba(255,255,255,.06) 34%,rgba(255,255,255,.42) 58%,rgba(255,255,255,.08) 100%);mask-image:linear-gradient(90deg,transparent 0,transparent calc(50% - var(--ruler-gauss-cutoff)),rgba(255,255,255,.02) calc(50% - calc(var(--ruler-gauss-cutoff) * .82)),rgba(255,255,255,.05) calc(50% - calc(var(--ruler-gauss-cutoff) * .62)),rgba(255,255,255,.1) calc(50% - calc(var(--ruler-gauss-cutoff) * .42)),rgba(255,255,255,.18) calc(50% - calc(var(--ruler-gauss-cutoff) * .24)),rgba(255,255,255,.28) calc(50% - calc(var(--ruler-gauss-core))),transparent calc(50% - var(--ruler-sharp-cutoff)),transparent calc(50% + var(--ruler-sharp-cutoff)),rgba(255,255,255,.28) calc(50% + calc(var(--ruler-gauss-core))),rgba(255,255,255,.18) calc(50% + calc(var(--ruler-gauss-cutoff) * .24)),rgba(255,255,255,.1) calc(50% + calc(var(--ruler-gauss-cutoff) * .42)),rgba(255,255,255,.05) calc(50% + calc(var(--ruler-gauss-cutoff) * .62)),rgba(255,255,255,.02) calc(50% + calc(var(--ruler-gauss-cutoff) * .82)),transparent calc(50% + var(--ruler-gauss-cutoff)),transparent 100%),linear-gradient(180deg,transparent 0%,rgba(255,255,255,.06) 34%,rgba(255,255,255,.42) 58%,rgba(255,255,255,.08) 100%)}@keyframes fnirs-ruler-scroll{0%{background-position-x:0,0}to{background-position-x:calc(-1 * var(--tick-px-per-sec)),calc(-.5 * var(--tick-px-per-sec))}}.fnirs-ruler-marker{position:absolute;top:0;bottom:0;width:0;display:grid;align-content:start;justify-items:center}.fnirs-ruler-marker:before{content:"";position:absolute;top:2px;bottom:12px;width:1px;border-radius:2px}.fnirs-ruler-marker.now{left:50%;transform:translate(-1px)}.fnirs-ruler-marker.now:before{background:#8ce9ff;box-shadow:0 0 6px #8ce9ff33}.fnirs-ruler-marker.show{left:calc(50% - var(--show-offset-px));transform:translate(-1px)}.fnirs-ruler-marker.show:before{background:#ffb77a;box-shadow:0 0 5px #ffb77a24}.fnirs-ruler-tag{margin-top:0;padding:0;border-radius:0;font-size:.38rem;letter-spacing:.12em;opacity:.62;background:transparent;border:none}.fnirs-ruler-marker.now .fnirs-ruler-tag{color:#a7eeff}.fnirs-ruler-marker.show .fnirs-ruler-tag{color:#ffc487}.fnirs-ruler-delta{margin-top:13px;font-size:.46rem;font-weight:700;letter-spacing:.02em;text-shadow:none}.fnirs-ruler-marker.show .fnirs-ruler-delta{background:transparent;border-radius:0;padding:0}.fnirs-ruler-marker.now .fnirs-ruler-delta{color:#d8f8ff}.fnirs-ruler-marker.show .fnirs-ruler-delta{color:#ffbf84}.fnirs-scene-overlay{position:absolute;top:1.1rem;left:1.1rem;display:grid;gap:.35rem;pointer-events:none}.fnirs-scene-overlay{display:none}.fnirs-chip{display:inline-flex;align-items:center;gap:.4rem;font-size:.68rem;padding:.3rem .5rem;border-radius:999px;background:#080a10b8;border:1px solid rgba(255,255,255,.1)}.fnirs-chip .dot{width:7px;height:7px;border-radius:50%}.fnirs-chip.left .dot{background:#ff7a4d}.fnirs-chip.right .dot{background:#59a7ff}.fnirs-panel{display:grid;gap:.85rem;align-content:start}.fnirs-panel{display:none}.fnirs-panel .card{padding:.95rem}.fnirs-panel h3{font-size:.75rem;letter-spacing:.1em;text-transform:uppercase;color:#8be8ff;margin-bottom:.65rem}.fnirs-metric-grid{display:grid;grid-template-columns:1fr 1fr;gap:.45rem}.fnirs-metric{background:#ffffff08;border:1px solid rgba(255,255,255,.06);border-radius:10px;padding:.6rem}.fnirs-metric-label{display:block;font-size:.62rem;opacity:.65;margin-bottom:.3rem}.fnirs-metric-value{font-size:.9rem;font-weight:600}.fnirs-metric-value.hot{color:#ff9a8a}.fnirs-metric-value.cold{color:#8ac0ff}.fnirs-slider-wrap{display:grid;gap:.45rem}.fnirs-slider-row{display:flex;justify-content:space-between;gap:.5rem;font-size:.68rem;opacity:.7}.fnirs-slider{width:100%}.fnirs-delay-track{position:relative;height:24px;border-radius:8px;border:1px solid rgba(255,255,255,.08);background:linear-gradient(90deg,#32467824,#788cb414);overflow:hidden}.fnirs-delay-track:before{content:"";position:absolute;left:0;top:0;bottom:0;width:var(--delay-gap-pct, 0%);background:#ffa05014}.fnirs-marker{position:absolute;top:3px;width:2px;height:18px;background:#8be8ff;box-shadow:0 0 8px #8be8ff59}.fnirs-marker.displayed{background:#ffb87d;box-shadow:0 0 8px #ffb87d66}.fnirs-marker-label{position:absolute;top:2px;transform:translate(-50%);padding-top:14px;font-size:.6rem;white-space:nowrap;opacity:.75}.fnirs-small{font-size:.67rem;line-height:1.35;opacity:.75}.fnirs-error{color:#ff9c9c}@media(max-width:980px){.fnirs-controls{right:.85rem;top:.85rem}.fnirs-scene-card,.fnirs-scene{min-height:100vh}.fnirs-ruler-shell{left:.8rem;right:6.2rem;top:.55rem}.fnirs-ruler-track{height:24px}.fnirs-ruler-tag{font-size:.38rem}.fnirs-ruler-delta{margin-top:11px;font-size:.45rem}.fnirs-conn-dot{justify-self:start}}
